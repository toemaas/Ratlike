[gd_scene load_steps=12 format=3 uid="uid://5vjitlxlr6gq"]

[ext_resource type="Script" uid="uid://cq1lio4ksep8g" path="res://main.gd" id="1_0l1we"]
[ext_resource type="PackedScene" uid="uid://bt7i0emrwybnt" path="res://RatGameLevel1Greybox5.tscn" id="2_0l1we"]
[ext_resource type="PackedScene" uid="uid://0nd7lniffuj4" path="res://player.tscn" id="2_foyw7"]
[ext_resource type="PackedScene" uid="uid://driilhpt113id" path="res://teleporter.tscn" id="3_foyw7"]
[ext_resource type="PackedScene" uid="uid://c14c4ncsogmd8" path="res://hud.tscn" id="3_l6eyr"]
[ext_resource type="PackedScene" uid="uid://c5sulhcjpw1ms" path="res://cheese.tscn" id="5_xsnk2"]
[ext_resource type="PackedScene" uid="uid://uud775qrqjh1" path="res://pause_menu.tscn" id="7_c00e3"]
[ext_resource type="PackedScene" uid="uid://dhucqd6yr306w" path="res://powerup.tscn" id="9_466b2"]
[ext_resource type="PackedScene" uid="uid://diog71fvn2qmr" path="res://mouse.tscn" id="9_evv1w"]
[ext_resource type="Script" uid="uid://do7yeglyyna3w" path="res://powerup.gd" id="10_evv1w"]

[sub_resource type="NavigationMesh" id="NavigationMesh_466b2"]
vertices = PackedVector3Array(-74.5, 0.5, -74.5, -74.5, 0.5, 74.5, 74.5, 0.5, 74.5, 74.5, 0.5, -74.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[node name="LevelOne" type="Node3D"]
script = ExtResource("1_0l1we")

[node name="Environment" parent="." instance=ExtResource("2_0l1we")]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 0)
navigation_mesh = SubResource("NavigationMesh_466b2")

[node name="NavigationRegion3D2" type="NavigationRegion3D" parent="Environment"]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, -10.2151, 24.5, -4.53875)
navigation_mesh = SubResource("NavigationMesh_466b2")

[node name="Player" parent="." instance=ExtResource("2_foyw7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -27.8604, 2.70856, 21.3886)
collision_mask = 19

[node name="Hud" parent="Player" instance=ExtResource("3_l6eyr")]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.270432, 0.962739, 0, -0.962739, 0.270432, 0, 52.5451, 0)

[node name="Rathole" parent="." instance=ExtResource("3_foyw7")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 36.9045, 40.9057, 11.4936)
needed_cheese = 2

[node name="Cheese" type="Node3D" parent="."]

[node name="Cheese 1" parent="Cheese" instance=ExtResource("5_xsnk2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.991721, 24.9392, -0.814863)

[node name="Cheese 2" parent="Cheese" instance=ExtResource("5_xsnk2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30.4581, 8.44798, -27.7142)

[node name="Cheese 3" parent="Cheese" instance=ExtResource("5_xsnk2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.7483, 11.8593, -27.7594)

[node name="PauseMenu" parent="." instance=ExtResource("7_c00e3")]

[node name="Node3D" type="Node3D" parent="."]

[node name="Hamster" parent="Node3D" instance=ExtResource("9_evv1w")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 26.372, 5.4, 6.291)
patrol_points = Array[Vector3]([Vector3(25, 5.4, 12.5), Vector3(25, 5.4, 4.7)])
movement_speed = 15.0

[node name="Hamster2" parent="Node3D" instance=ExtResource("9_evv1w")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, 25, -15)
patrol_points = Array[Vector3]([Vector3(-15, 0, -15), Vector3(3, 0, 3), Vector3(3, 0, -15), Vector3(-15, 0, 3)])
movement_speed = 15.0

[node name="Hamster3" parent="Node3D" instance=ExtResource("9_evv1w")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, 25, 3)
patrol_points = Array[Vector3]([Vector3(-15, 0, 3), Vector3(-15, 0, -15), Vector3(3, 0, -15), Vector3(3, 0, 3)])
movement_speed = 15.0

[node name="Hamster4" parent="Node3D" instance=ExtResource("9_evv1w")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 25, -15)
patrol_points = Array[Vector3]([Vector3(3, 0, -15), Vector3(3, 0, 3), Vector3(-15, 0, 3), Vector3(-15, 0, -15)])
movement_speed = 15.0

[node name="Powerups" type="Node3D" parent="."]

[node name="Powerup" parent="Powerups" instance=ExtResource("9_466b2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30.8111, 0.334627, 0)
script = ExtResource("10_evv1w")

[connection signal="jump_charge_changed" from="Player" to="Player/Hud" method="_on_player_jump_charge_changed"]
[connection signal="cheese_collected" from="Cheese/Cheese 1" to="Player" method="collect_cheese"]
[connection signal="cheese_collected" from="Cheese/Cheese 2" to="Player" method="collect_cheese"]
[connection signal="cheese_collected" from="Cheese/Cheese 3" to="Player" method="collect_cheese"]
[connection signal="squashed" from="Node3D/Hamster" to="Player" method="squashed"]
[connection signal="squashed" from="Node3D/Hamster2" to="Player" method="squashed"]
[connection signal="squashed" from="Node3D/Hamster3" to="Player" method="squashed"]
[connection signal="squashed" from="Node3D/Hamster4" to="Player" method="squashed"]
[connection signal="body_entered" from="Powerups/Powerup" to="Powerups/Powerup" method="_on_body_entered"]
[connection signal="powerup_obtained" from="Powerups/Powerup" to="Player" method="update_powers"]
